[config]
default_to_workspace = false

### MAIN TESTS ###

[tasks.test-all]
description = "Build and run all code paths except docs"
category = "ICU4X Development"
command = "cargo"
args = ["test", "--all-features", "--all-targets"]

[tasks.test-docs]
description = "Build and run all docs tests"
category = "ICU4X Development"
command = "cargo"
args = ["test", "--all-features", "--doc"]

[tasks.exam]
description = "Run all test procedures"
category = "ICU4X Development"
dependencies = [
    "test-all",
    "test-docs",
]

### ADDITIONAL TESTS ###

[tasks.build-all-features]
description = "Build all permutations of all features"
category = "ICU4X Development"
command = "cargo"
args = ["build-all-features"]

### LINTS ###

[tasks.fmt-check]
description = "Check for formatting on all code"
category = "ICU4X Development"
command = "cargo"
args = ["fmt", "--", "--check"]

[tasks.clippy-all]
description = "Run Clippy on all code paths"
category = "ICU4X Development"
command = "cargo"
args = ["clippy", "--all-features", "--all-targets"]

# Lint target without Clippy. Used in CI since Clippy has a separate CI task.
[tasks.lint-no-clippy]
description = "Run all lint procedures except for Clippy"
category = "ICU4X Development"
dependencies = [
    "fmt-check",
]

[tasks.lint]
description = "Run all lint procedures"
category = "ICU4X Development"
dependencies = [
    "lint-no-clippy",
    "clippy-all",
]

### ALL-IN-ONE ###

[tasks.quick]
description = "Run quick version of all lints and tests"
category = "ICU4X Development"
dependencies = [
    "test-all",
    "fmt-check",
    "clippy-all",
]

[tasks.ci]
description = "Run all lints and tests"
category = "ICU4X Development"
dependencies = [
    "exam",
    "build-all-features",
    "lint",
]
